# AI Agent Instructions for scriptify

## Primary Reference

**READ FIRST**: All core development guidelines are in `CONTRIBUTING.md`. This document contains only AI-specific additions.

## AI-Specific Communication Guidelines

1. **Be conversational but professional**
2. **Refer to the user in the second person and yourself in the first person**
3. **Format responses in markdown** - Use backticks for file, directory, function, and class names
4. **NEVER lie or make things up**
5. **Refrain from apologizing excessively** - Focus on solutions instead

## AI-Specific Tool Usage

1. **Make sure to adhere to tool schemas**
2. **Provide every required argument**
3. **DO NOT use tools to access items already available in context**
4. **Use only available tools** - Don't attempt to use tools that appear disabled
5. **NEVER run non-terminating commands** like `npm run start`, `npm run dev`, `python -m http.server`, etc.

## AI-Specific Code Block Formatting

**CRITICAL**: You MUST use ONLY the following format for code blocks:

```path/to/Something.blah#L123-456
(code goes here)
```

- The `#L123-456` means line number range 123 through 456
- The `path/to/Something.blah` is a path in the project
- If no valid project path exists, use `/dev/null/path.extension`
- This is the ONLY valid format - the parser doesn't understand ````language` syntax

**Examples of CORRECT formatting:**
```scriptify/src/lib.rs#L1-3
//! # scriptify
//!
//! A Rust library for writing shell-like scripts with elegant syntax.
```

```/dev/null/example.md#L1-3
# Level 1 heading
## Level 2 heading
### Level 3 heading
```

**NEVER use these incorrect formats:**
- ` ```rust ` (language name)
- ` ``` ` (bare backticks)
- Indented code blocks

## AI-Specific File Operations

### Before Reading or Editing Files
1. **Find full paths first** - Use `find_path` if you don't know the complete path
2. **Use `grep` to search for symbols** in the project rather than guessing paths
3. **Use `list_directory` to explore** project structure when needed

### When Searching the Codebase
- **Bias towards using tools** to find answers rather than asking the user
- **Use `grep` for symbol searches** rather than `find_path`
- **Scope searches to subtrees** as you learn the project structure

## AI-Specific Debugging Guidelines

- **Only make code changes if certain** you can solve the problem
- **Add descriptive logging** and error messages to track state
- **Add test functions** to isolate problems
- **Address root causes**, not just symptoms

## AI-Specific External API Usage

1. **Use best-suited APIs** without asking permission unless explicitly requested
2. **Choose compatible versions** with existing dependency files
3. **Point out API key requirements** and follow security best practices
4. **DO NOT hardcode API keys** in exposed locations

## AI-Specific Error Handling

- **Make 1-2 attempts** at fixing diagnostics, then defer to the user
- **Don't remove generated code** just to solve diagnostics
- **Complete, mostly correct code** is more valuable than perfect code that doesn't solve the problem

## Before Starting Work

1. **MANDATORY**: Follow all rules in `CONTRIBUTING.md`
2. **Create feature branch** as specified in CONTRIBUTING.md
3. **Read relevant project files** listed in CONTRIBUTING.md
4. **Understand the project structure** outlined in CONTRIBUTING.md

## AI-Specific Workflow Reminders

### üö® MANDATORY: Pre-Commit Process (AI Agents MUST Follow)

**BEFORE EVERY COMMIT, AI agents must run:**
```bash
cargo xtask precommit
```

**AI-specific reminder checklist:**
1. ‚úÖ Code changes complete
2. ‚úÖ `cargo xtask precommit` executed and ALL checks pass
3. ‚úÖ Any formatting changes committed separately if needed
4. ‚úÖ Main feature/fix changes committed
5. ‚úÖ Push to feature branch (never main)

**Common AI mistakes to avoid:**
- ‚ùå Running only `cargo test` and thinking it's sufficient
- ‚ùå Forgetting clippy checks exist
- ‚ùå Committing without running precommit
- ‚ùå Ignoring formatting changes made by rustfmt

### Other Workflow Requirements

- **Follow the exact pre-commit process** outlined in CONTRIBUTING.md
- **Use the branch naming conventions** specified in CONTRIBUTING.md
- **Create Pull Requests** following the guidelines in CONTRIBUTING.md
- **NEVER work directly on main** - this is a zero-tolerance rule

Remember: The core development workflow, quality standards, and absolute rules are all in `CONTRIBUTING.md`. This file only adds AI-specific technical requirements for tool usage and communication.
